include ../common.mk

CFLAGS  = $(CFLAGS_STD) $(CFLAGS_COMMON) $(CFLAGS_DISPLAY) $(CFLAGS_SCREEN) $(CFLAGS_BUFFER)
LDFLAGS = $(LDFLAGS_STD) $(LDFLAGS_COMMON) $(LDFLAGS_DISPLAY) $(LDFLAGS_SCREEN) $(LDFLAGS_BUFFER)
LIB_DEP = $(LIB_COMMON) $(LIB_DISPLAY) $(LIB_SCREEN) $(LIB_BUFFER)

OBJS = main.o
PYE_BIN = $(BIN_PATH)/pye

TEST_DISP_OBJS = display_test.o
TEST_DISP_BIN=$(BIN_PATH)/test/display

TEST_SCRN_OBJS = screen_test.o
TEST_SCRN_BIN=$(BIN_PATH)/test/screen

ALL=$(TEST_DISP_BIN) $(TEST_SCRN_BIN) $(PYE_BIN)
all: $(ALL)

$(TEST_DISP_BIN): $(TEST_DISP_OBJS) $(LIB_DEP)
	$(CC) -o $@ $(TEST_DISP_OBJS) $(LDFLAGS)

$(TEST_SCRN_BIN): $(TEST_SCRN_OBJS) $(LIB_DEP)
	$(CC) -o $@ $(TEST_SCRN_OBJS) $(LDFLAGS)

$(PYE_BIN): $(OBJS) $(LIB_DEP)
	$(CC) -o $@ $(OBJS) $(LDFLAGS)

clean:
	rm -f *.o $(ALL)
